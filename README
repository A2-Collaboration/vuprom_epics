Changed version to read registers
